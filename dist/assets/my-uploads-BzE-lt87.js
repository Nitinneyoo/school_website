import{r as e,j as a}from"./vendor-router-fAM80Ws7.js";import{u as s}from"./index-C4WCsToT.js";import{a as t,d as r}from"./resultsService-BcZ-_R3p.js";import{l}from"./userService-BBQdlcOW.js";import{B as o}from"./BackButton-BhA8Hc8g.js";import{m as i,A as n}from"./vendor-animations-C3B6sSUk.js";import{F as c}from"./file-text-DKUxm9J9.js";import{S as d}from"./search-BwHC8uIh.js";import{F as m}from"./funnel-B6yrBEBh.js";import{D as x}from"./download-BqFuAVEx.js";import{T as p}from"./trash-2-Yg2jkoIN.js";import"./vendor-react-HnKmhvXM.js";import"./vendor-ui-CasoyLD2.js";import"./arrow-left-C2BP7kg2.js";const u=function(){const{user:u,userProfile:h}=s(),[g,f]=e.useState([]),[b,j]=e.useState(!0),[N,v]=e.useState(""),[y,w]=e.useState(""),[C,S]=e.useState(""),k=e.useCallback(async()=>{if(u){j(!0);const e=await t(u.uid);f(e),j(!1)}},[u]);e.useEffect(()=>{k()},[k]);const L=g.filter(e=>{const a=e.fileName.toLowerCase().includes(N.toLowerCase())||e.subject.toLowerCase().includes(N.toLowerCase()),s=""===y||e.class===y,t=""===C||e.subject===C;return a&&s&&t}),A=Array.from(new Set(g.map(e=>e.class))).sort((e,a)=>e-a),D=Array.from(new Set(g.map(e=>e.subject))).sort();return a.jsxs("div",{className:"min-h-screen pt-32 pb-20 px-4",children:[a.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[a.jsx(o,{to:"/teacher",label:"Back to Dashboard"}),a.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[a.jsx(i.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"p-3 rounded-2xl bg-teal-500/20 border border-teal-500/30",children:a.jsx(c,{className:"h-8 w-8 text-teal-400"})}),a.jsxs("div",{children:[a.jsxs(i.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"text-4xl font-black text-white tracking-tight",children:["My ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-emerald-400",children:"Uploads"})]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your uploaded results and files"})]})]})]}),a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"glass-card p-4 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(d,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search files...",value:N,onChange:e=>v(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-teal-500/50 focus:bg-white/10 transition-all"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(m,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsxs("select",{value:y,onChange:e=>w(e.target.value?Number(e.target.value):""),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-teal-500/50 focus:bg-white/10 transition-all appearance-none cursor-pointer",children:[a.jsx("option",{value:"",className:"bg-gray-900",children:"All Classes"}),A.map(e=>a.jsxs("option",{value:e,className:"bg-gray-900",children:["Class ",e]},e))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(c,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsxs("select",{value:C,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-teal-500/50 focus:bg-white/10 transition-all appearance-none cursor-pointer",children:[a.jsx("option",{value:"",className:"bg-gray-900",children:"All Subjects"}),D.map(e=>a.jsx("option",{value:e,className:"bg-gray-900",children:e},e))]})]})]})}),b?a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-teal-500/30 border-t-teal-500 rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading uploads..."})]}):0===L.length?a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx(c,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300 text-lg font-medium",children:0===g.length?"No uploads yet":"No uploads match your filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.jsx(n,{children:L.map((e,s)=>{var t;return a.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"glass-card p-6 group hover:border-white/20 transition-all",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"bg-teal-500/20 p-3 rounded-xl flex-shrink-0 text-teal-400 group-hover:bg-teal-500/30 transition-colors",children:a.jsx(c,{className:"h-8 w-8"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-white truncate text-lg",title:e.fileName,children:e.fileName}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"px-2.5 py-1 bg-blue-500/20 text-blue-300 border border-blue-500/30 text-xs rounded-lg font-medium",children:["Class ",e.class]}),a.jsx("span",{className:"px-2.5 py-1 bg-purple-500/20 text-purple-300 border border-purple-500/30 text-xs rounded-lg font-medium",children:e.subject})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-4 font-mono",children:["Uploaded on ",null==(t=e.uploadedAt)?void 0:t.toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-white/5",children:[a.jsxs("a",{href:e.fileURL,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-teal-500/20 text-teal-300 border border-teal-500/30 rounded-xl hover:bg-teal-500/30 transition-all font-bold text-sm",children:[a.jsx(x,{className:"h-4 w-4"}),"Download"]}),a.jsx("button",{onClick:()=>(async e=>{if(confirm(`Are you sure you want to delete "${e.fileName}"?`)){const a=await r(e.id,e.fileURL);a.success?(u&&h&&await l(u.uid,h.name,"delete",`Deleted ${e.fileName} for Class ${e.class} - ${e.subject}`),k()):alert(a.error||"Failed to delete file")}})(e),className:"p-2.5 bg-red-500/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-500/30 transition-all",title:"Delete",children:a.jsx(p,{className:"h-4 w-4"})})]})]},e.id)})})})]})]})};export{u as component};
