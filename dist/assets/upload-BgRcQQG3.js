import{u as e,r as s,j as a}from"./vendor-router-fAM80Ws7.js";import{u as t}from"./index-C4WCsToT.js";import{u as r}from"./resultsService-BcZ-_R3p.js";import{l}from"./userService-BBQdlcOW.js";import{B as i}from"./BackButton-BhA8Hc8g.js";import{m as n,A as c}from"./vendor-animations-C3B6sSUk.js";import{U as o}from"./upload-DAUVvuK4.js";import{C as d}from"./circle-check-big-CE5Xh7Vt.js";import{F as m}from"./file-text-DKUxm9J9.js";import{C as x}from"./circle-alert-MXEWLdO3.js";import{L as h}from"./loader-circle-3UJ_LfFu.js";import"./vendor-react-HnKmhvXM.js";import"./vendor-ui-CasoyLD2.js";import"./arrow-left-C2BP7kg2.js";const u=[1,2,3,4,5,6,7,8,9,10],p=["Mathematics","Science","English","Social Studies","Hindi","Computer Science","Physical Education","Art"],g=function(){const{user:g,userProfile:f}=t(),j=e(),[b,y]=s.useState(null),[N,v]=s.useState(""),[w,S]=s.useState(""),[C,k]=s.useState(!1),[D,U]=s.useState(0),[B,F]=s.useState(null),[P,M]=s.useState(!1),R=s.useRef(null);return a.jsx("div",{className:"min-h-screen pt-32 pb-20 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(i,{to:"/teacher",label:"Back to Dashboard"}),a.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[a.jsx(n.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"p-3 rounded-2xl bg-green-500/20 border border-green-500/30",children:a.jsx(o,{className:"h-8 w-8 text-green-400"})}),a.jsxs("div",{children:[a.jsxs(n.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"text-4xl font-black text-white tracking-tight",children:["Upload ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-400",children:"Results"})]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Publish new exam results or study materials"})]})]})]}),a.jsx(n.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"glass-card p-8",children:P?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(n.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(d,{className:"h-10 w-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Upload Successful!"}),a.jsx("p",{className:"text-gray-400",children:"Redirecting to your uploads..."})]}):a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),b&&N&&w&&g&&f){k(!0),F(null),U(0);try{const e=await r(b,Number(N),w,g.uid,f.name,e=>U(e));e.success?(await l(g.uid,f.name,"upload",`Uploaded ${b.name} for Class ${N} - ${w}`),M(!0),setTimeout(()=>{j({to:"/teacher/my-uploads"})},2e3)):F(e.error||"Upload failed")}catch(s){F("An unexpected error occurred")}finally{k(!1)}}else F("Please fill in all fields and select a file")},className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-gray-300 ml-1",children:"Class"}),a.jsxs("select",{value:N,onChange:e=>v(Number(e.target.value)),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-green-500/50 focus:bg-white/10 transition-all appearance-none cursor-pointer",required:!0,children:[a.jsx("option",{value:"",className:"bg-gray-900",children:"Select Class"}),u.map(e=>a.jsxs("option",{value:e,className:"bg-gray-900",children:["Class ",e]},e))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-gray-300 ml-1",children:"Subject"}),a.jsxs("select",{value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-green-500/50 focus:bg-white/10 transition-all appearance-none cursor-pointer",required:!0,children:[a.jsx("option",{value:"",className:"bg-gray-900",children:"Select Subject"}),p.map(e=>a.jsx("option",{value:e,className:"bg-gray-900",children:e},e))]})]})]}),a.jsxs("div",{onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]&&(y(e.dataTransfer.files[0]),F(null))},onDragOver:e=>{e.preventDefault()},onClick:()=>{var e;return null==(e=R.current)?void 0:e.click()},className:"relative border-2 border-dashed rounded-2xl p-12 text-center cursor-pointer transition-all "+(b?"border-green-500/50 bg-green-500/10":"border-white/10 hover:border-green-500/30 hover:bg-white/5"),children:[a.jsx("input",{type:"file",ref:R,onChange:e=>{e.target.files&&e.target.files[0]&&(y(e.target.files[0]),F(null))},className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx"}),a.jsx(c,{mode:"wait",children:b?a.jsxs(n.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-2xl flex items-center justify-center mb-4 text-green-400",children:a.jsx(m,{className:"h-8 w-8"})}),a.jsx("p",{className:"text-lg font-bold text-white mb-1",children:b.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[(b.size/1024/1024).toFixed(2)," MB"]}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),y(null)},className:"mt-4 px-4 py-2 bg-red-500/20 text-red-400 text-sm font-bold rounded-lg hover:bg-red-500/30 transition-colors",children:"Remove File"})]}):a.jsxs(n.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center mb-4 text-gray-400 group-hover:text-green-400 transition-colors",children:a.jsx(o,{className:"h-8 w-8"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Drag & drop file here"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"or click to browse"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Supports PDF, Excel, Word (Max 10MB)"})]})})]}),C&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Uploading..."}),a.jsxs("span",{className:"text-green-400 font-bold",children:[Math.round(D),"%"]})]}),a.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx(n.div,{initial:{width:0},animate:{width:`${D}%`},className:"h-full bg-gradient-to-r from-green-500 to-emerald-500"})})]}),B&&a.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-center gap-3 text-red-400",children:[a.jsx(x,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("p",{className:"font-medium",children:B})]}),a.jsx("button",{type:"submit",disabled:C||!b,className:"w-full py-4 rounded-xl font-black text-lg flex items-center justify-center gap-2 transition-all "+(C||!b?"bg-gray-500/20 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-teal-500 text-white hover:from-green-600 hover:to-teal-600 shadow-lg shadow-green-500/25 hover:shadow-green-500/40 hover:-translate-y-1"),children:C?a.jsxs(a.Fragment,{children:[a.jsx(h,{className:"h-5 w-5 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(o,{className:"h-5 w-5"}),"Upload Result"]})})]})})]})})};export{g as component};
